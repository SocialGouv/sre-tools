(this["webpackJsonp@socialgouv/webseal"]=this["webpackJsonp@socialgouv/webseal"]||[]).push([[0],{189:function(e,t){},191:function(e,t){},201:function(e,t){},203:function(e,t){},228:function(e,t){},229:function(e,t){},234:function(e,t){},236:function(e,t){},243:function(e,t){},262:function(e,t){},300:function(e,t,n){"use strict";n.r(t);var c,a=n(0),s=n.n(a),r=n(160),j=n.n(r),l=n(10),i=n.n(l),o=n(16),b=n(15),u=n(11),d=n(303),O=n(305),A=n(302),p=n(163),x=n(307),h=n(88),m=n(161),f=n(304),g=n(162),w=(n(281),n(25)),C=n(165),D=n(306),v=n(308),E=n(164),I=n(89),S=n(1),B=s.a.forwardRef((function(e,t){var n=e.name,c=e.value,a=Object(C.a)(e,["name","value"]);return Object(S.jsx)(D.a.Check,Object(u.a)({inline:!0,ref:t,name:n,id:"".concat(n,"-").concat(c),label:c,type:"radio",value:c},a))})),M=(c=function(e){return["namespace","scope","cluster","name"].includes(e)},function(e){return Object.keys(e).filter(c).reduce((function(t,n){return Object(u.a)(Object(u.a)({},t),{},Object(w.a)({},n,e[n]))}),{})}),T=function(e){var t=e.onSubmit,n=function(){var e=Object(I.parse)(window.location.search),t=Object(a.useState)(e),n=Object(b.a)(t,2),c=n[0],s=n[1];return[c,Object(a.useCallback)((function(e){window.history.replaceState({},window.title,document.location.href.split("?")[0]+"?"+Object(I.stringify)(e)),s(e)}),[s])]}(),c=Object(b.a)(n,2),s=c[0],r=c[1],j=Object(u.a)({cluster:"dev",value:"",namespace:"",name:"",scope:"cluster"},M(s)),l=Object(E.a)({mode:"onChange",defaultValues:j}),i=l.register,o=l.handleSubmit,d=l.watch,O=l.formState,x=l.setValue,h=l.trigger,m=d("cluster"),f=d("scope");return Object(S.jsxs)(D.a,{onSubmit:o((function(e){r(M(e)),t(e)})),children:[Object(S.jsxs)(A.a,{children:[Object(S.jsx)(p.a,{xs:12,md:6,children:Object(S.jsxs)(A.a,{children:[Object(S.jsx)(p.a,{sm:"3",children:Object(S.jsx)(D.a.Label,{children:"Cluster"})}),Object(S.jsxs)(p.a,{sm:"9",children:[Object(S.jsx)(B,Object(u.a)(Object(u.a)({name:"cluster",value:"dev"},i("cluster")),{},{onChange:function(e){x("cluster",e.target.value),x("scope","cluster"),h()}})),Object(S.jsx)(B,Object(u.a)(Object(u.a)({name:"cluster",value:"prod"},i("cluster")),{},{onChange:function(e){x("cluster",e.target.value),x("scope","strict"),h()}}))]})]})}),Object(S.jsx)(p.a,{children:Object(S.jsxs)(A.a,{children:[Object(S.jsx)(p.a,{xs:12,sm:3,children:Object(S.jsx)(D.a.Label,{children:"Scope"})}),Object(S.jsxs)(p.a,{sm:9,children:[Object(S.jsx)(B,Object(u.a)(Object(u.a)({name:"scope",value:"cluster",disabled:"prod"===m},i("scope")),{},{onChange:function(e){x("scope",e.target.value),h()}})),Object(S.jsx)(B,Object(u.a)(Object(u.a)({name:"scope",value:"namespace",disabled:"prod"===m},i("scope")),{},{onChange:function(e){x("scope",e.target.value),h()}})),Object(S.jsx)(B,Object(u.a)(Object(u.a)({name:"scope",value:"strict"},i("scope")),{},{onChange:function(e){x("scope",e.target.value),h()}}))]})]})})]}),("namespace"===f||"strict"===f)&&Object(S.jsxs)(D.a.Group,{as:A.a,children:[Object(S.jsx)(D.a.Label,{column:!0,children:"Namespace"}),Object(S.jsx)(p.a,{sm:"9",children:Object(S.jsx)(D.a.Control,Object(u.a)(Object(u.a)({name:"namespace"},i("namespace",{required:!0})),{},{required:!0,type:"text",placeholder:"K8s Namespace"}))})]}),"strict"===f&&Object(S.jsxs)(D.a.Group,{as:A.a,children:[Object(S.jsx)(D.a.Label,{column:!0,children:"Secret name"}),Object(S.jsx)(p.a,{sm:"9",children:Object(S.jsx)(D.a.Control,Object(u.a)(Object(u.a)({name:"name"},i("name",{required:!0})),{},{type:"text",placeholder:"K8s secret name"}))})]}),Object(S.jsx)(D.a.Group,{children:Object(S.jsx)(D.a.Control,Object(u.a)(Object(u.a)({as:"textarea",name:"value",style:{marginTop:10},rows:4},i("value",{required:!0})),{},{onChange:function(){return h()},placeholder:"Value to encrypt"}))}),Object(S.jsx)(v.a,{disabled:!O.isDirty||!O.isValid,block:!0,variant:"primary",type:"submit",children:"Encrypt"})]})},N={dev:"-----BEGIN CERTIFICATE-----\nMIIErjCCApagAwIBAgIRAOqAV9ZpCl1cwMunTHirqXwwDQYJKoZIhvcNAQELBQAw\nADAeFw0yMDA1MjYwODQxMTBaFw0zMDA1MjQwODQxMTBaMAAwggIiMA0GCSqGSIb3\nDQEBAQUAA4ICDwAwggIKAoICAQDc5wz/el5+ghmNAsQzpFK3jtLRIDcoYgyeGHaG\nLH/FCuatiE3qhFeJt2uYQ+GFmEg3e9N/6xDY8NgUMvLdUlAfl5TqV5H96EXTSsGE\naRL2K4EIIdmFflas+r7dh5IYtmV8NTXW2ESLkyOe3PufK/OhdD/xcxglYLM+JnR2\npbKqFvFcsk+LHK3FTWt0xSeqgd+6G9PIxUAbHtoKYI9R41rWnCXY7n0zp+zWD/6j\nEDsbCgFJ657Zwwn0XXGkQqItdZsN+ETIcBVIdqemzcksd7RRUZQiJF8imM5S/wj/\n1o55JwAPLqg5Odj5T/pQq4gSG+UG1P0eJxBQpUCgmtW1SAjS2Gv9kkuw/PAMmLAa\nN0uHnM8TY9OPLLMENjmn9IhvYrhj5lKff4NXNC4nHFSDUAVfu5kNHrYn9WnCCw/f\nZE81p5Do7IcsbfmgEq3Ttg7p1eqXpH9NE9TWSZTz3HW/0lmEuIsNxjX/692DBeP/\nCCUiYlAef704Woo84jwIz4jEwfjonsFVaHbbtIGyqjvTlWcYfQnCLvnB+Plqutc/\n/p8/ViXXfuAwj/K3lYvhGWt2TNLo963XG/pqBVbZxYVI4m7IzrZ0vhbhck1oGYN8\nyX8sYPBUn5/5X/bJ8Xz1KsAeCfSXAvCjAZ3MfQDwxbsEURVQAeiDcF61G75/Lq/Z\nBm74hwIDAQABoyMwITAOBgNVHQ8BAf8EBAMCAAEwDwYDVR0TAQH/BAUwAwEB/zAN\nBgkqhkiG9w0BAQsFAAOCAgEAKLvQtDV5QVNUEcg3ywL03IwtNWmU8EqqASgckVAc\ndmeGnFwV7+7VnrIHI34xCZDhAVEnlMAb0oELgTDSstTx4p25rjqOLQfPcb0TsPko\ncpJHS00trLsLX4DYoZ1dLprgySGrC9jQ/FMYMK1oZ0M04gA/U9alNVNu2DWKosHu\nJGRYBbXVnse5rZi3hl4GV5Vq2ZR/3GHL9xgcjMcSLqHhXoSULLm5qEBUA5flV0BJ\nbY2FEfpm1NHSh5vOaA5t7lrW/XqiAuo8lJM2Ztg/dsX6Zxq7Memq8nqMRpoMFbdj\ni0jTxlPL1ssVHvvmWcLsdx9fHX7XaNGZ4ulA6BIL4DZQMPxvtFk9alqbc9WnjsqL\n/8QA3STXkTSzWrSsTUcabxlp5+MLHRf31iE1dlGVv7FVLjPy29T145eSzoNPM9sN\n1+aBLnXDCj5HUwto8+iKJn7VTURty5KceUFSeURXM2IKYYTec8MElLX0PeXi+SvO\nW37ZCn0RMnljus5aTUPbRHNvJ3Ut/1WDLQu8X0wIm509F1A80Udg5FTxHasBizM2\nL+rpr2923MG1JSitDfvNj1rxx1FLdynP84SOEJDCtbB8YRcDUC4bHKrAcG4FBAFX\nUDzbbsoR58onjcZW3QH4mvV9K3+llwHSo8zfYyKRhF8pUUJHp7A/8DgMYQyYAv2z\nbag=\n-----END CERTIFICATE-----",prod:"-----BEGIN CERTIFICATE-----\nMIIErTCCApWgAwIBAgIQXJCfJIfF/fpww3KcvD0j1TANBgkqhkiG9w0BAQsFADAA\nMB4XDTIwMDUyNjA4NDkyN1oXDTMwMDUyNDA4NDkyN1owADCCAiIwDQYJKoZIhvcN\nAQEBBQADggIPADCCAgoCggIBAK8tTm78wfObpDaAa00eli9TwZfjbSO+Bis6DqNX\nto+tddnEBuEmnOlTKKoODZwnuph/G8JELKwbaTJ1bdYKasKDdgYju52ZMjBNexs4\nOX1L+YLiJEkwYBSkmYR/ARAulXIAolozjvub888OdWWOuZfX3DeNh/AI24uc+nrw\nsiKMyRZSsW9OXhRpBFe1BY8xofvnf1Ts5+OZWeNEmTbAKROKDd3rJpaKzxsJJwQ+\nSmRUQnxmwNxOfjFFxJx6n1jRloqwpLTOkCX/iSp6Nhnprcs8dvFjSH7l+gQU8XVY\nVXRWfXdJ6hBZd6fOjhKxlIrPz5+mUsMhyzON3ZS83XG9imFrWgSh3nBCifZRs4YF\nwxtGL1Qwm6CM+OsjLHM4lo6hrh9eEZVO8TwrXWKDU1CKkBgXVA5irGJ7NbGKtzih\nBZMRZ5pqQQ6ptiLXxfiB6DgvIJqvL8+yrt22j/QFZtyKkVW02n+dNiI7ltxb9RdS\nhyv3wBbHORgw6DbPrpoRpabDfUDEGJnd7+gY0Z5P9wHeX1vtt4g+XR5z/ERWIkFR\nuK2cLpflhGv4zE5DkI/2Pp4EAsQirUPlbdelvEz6NPtJk6ws5gQgBorRPaDhZojz\ntcYkFzRv3gkNHCMCMEAPEgU1OdUqslJVwi9P+/cxe9Piwwd9WWTu7mg6OB0cjhPI\ntYzhAgMBAAGjIzAhMA4GA1UdDwEB/wQEAwIAATAPBgNVHRMBAf8EBTADAQH/MA0G\nCSqGSIb3DQEBCwUAA4ICAQAjGgAz92xGNjbcIxsn2B/URYTBcsKd9RcgmzB3kDWq\nEKUV3KbgAItq4c2WB9bc0IG1Icp9bYOXZy1ldPoGib4edMUZuOU4xUAFVCrALGbk\ng8ldoEuIiSGAjQDuvWxl6XK8/FcBK93tR591zuJHS2KXspnV3FWi1tE8lr2zEd+G\nwuFzm0/uAyg+A+SEZVGwSBSH0fMWcCEk+yGyb4zmM3VW8D5zQvbialiqdmycZWoi\nC7Ldto5dBeFCCL7ndh1U0//UqaDmRCLazSeU6wCilWT4RvejBwNcojIYd0wk9keS\n8z92wpKj5Hv+OPn1r4fAmMnc3ObwtkVnka+QvuhKZOXmNInJSqdsZFToS6TaQOO6\n/W/urXYlcILJPlbTMlpjzxYVCi93yMcSrrdZ3MADlPhgtN+clVIRSQ/7eIDkh7j9\n9C+Dsz9nKa7FBSngDheJEEPcG2jNeRvO9kM2hgkMfcNdmTZUNyE19p1bdnTFoWCs\nq22fGvXZi6kkZTMDcSYDBZ8OkWK20GuZAs1mxrz9HfMdZobH7yNOj7Oj+0bNf5Ef\ntN6We84bWM+Xh7wlZxXPHpos5JDC5PV1Kmbwf3riLtTVe2W7hy+oKULS+WO59KJz\niKzeAM8CuUQixJtSmrNjp1nAsSR6/BZXWRvmZShksQ4kwFm/PlsWLEKgtzxtP0tN\nfg==\n-----END CERTIFICATE-----"},y=function(){return Object(S.jsxs)(d.a,{style:{padding:"2rem 1rem"},children:[Object(S.jsx)("h1",{children:"WebSeal"}),Object(S.jsx)("p",{children:"Client-side sealed-secrets generation"})]})},L=function(e){return Object(S.jsx)("textarea",Object(u.a)(Object(u.a)({},e),{},{style:Object(u.a)({fontSize:"0.8rem",fontFamily:"Courier",border:"1px solid #ccc",width:"100%",padding:5,height:400},e.style||{})}))},K=function(e){var t=e.text,n=Object(a.useState)(!1),c=Object(b.a)(n,2),s=c[0],r=c[1];return Object(S.jsx)(m.CopyToClipboard,{text:t,onCopy:function(){r(!0),setTimeout((function(){return r(!1)}),2e3)},children:Object(S.jsx)(f.a,{style:{marginLeft:10,cursor:"pointer",transition:"all 0.2s ease-in"},color:s?"green":"black",title:"Copy",size:16})})},X=function(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),r=Object(b.a)(s,2),j=r[0],l=r[1];return Object(S.jsxs)(O.a,{children:[Object(S.jsx)(y,{}),Object(S.jsx)(A.a,{children:Object(S.jsxs)(p.a,{xs:12,children:[Object(S.jsx)(x.a,{children:Object(S.jsx)(x.a.Body,{children:Object(S.jsx)(T,{onSubmit:function(e){l(""),c("");var t=N[e.cluster];Object(h.encryptValue)(Object(u.a)({pemKey:t},e)).then(function(){var n=Object(o.a)(i.a.mark((function n(a){var s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(a),n.next=3,Object(h.getSealedSecret)({pemKey:t,namespace:e.namespace||"some-namespace",name:e.name||"some-secret-name",scope:e.scope,values:{VALUE:e.value}});case 3:s=n.sent,l(g.a.dump(s));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch(console.log)}})})}),n&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(x.a,{style:{marginTop:10},children:Object(S.jsxs)(x.a.Body,{children:[Object(S.jsxs)(x.a.Title,{children:["Encrypted ",Object(S.jsx)(K,{text:n})]}),Object(S.jsx)(L,{defaultValue:n,style:{height:200}})]})}),Object(S.jsx)(x.a,{style:{marginTop:10},children:Object(S.jsxs)(x.a.Body,{children:[Object(S.jsxs)(x.a.Title,{children:["SealedSecret ",Object(S.jsx)(K,{text:j})]}),Object(S.jsx)(L,{defaultValue:j})]})})]})]})})]})};function Q(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(X,{})})}var F=document.getElementById("root");j.a.render(Object(S.jsx)(a.StrictMode,{children:Object(S.jsx)(Q,{})}),F)},61:function(e,t){}},[[300,1,2]]]);
//# sourceMappingURL=main.2b0112ce.chunk.js.map