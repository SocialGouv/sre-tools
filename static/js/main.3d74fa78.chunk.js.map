{"version":3,"sources":["Form.js","useQueryParams.js","certificates.js","App.js","index.js"],"names":["RadioChoice","React","forwardRef","ref","name","value","props","Check","inline","id","label","type","keepValidQueryParamKeys","keyValidator","key","includes","object","Object","keys","filter","reduce","acc","Form","onSubmit","urlParams","parse","window","location","search","useState","innerData","setInnerData","useCallback","data","stringify","useQueryParams","queryParamsData","setQueryParamsData","defaultValues","cluster","namespace","scope","useForm","mode","register","handleSubmit","watch","formState","setValue","trigger","console","log","Row","Col","xs","md","sm","Label","onChange","e","target","disabled","Group","as","column","Control","required","placeholder","style","marginTop","rows","Button","isDirty","isValid","block","variant","certificates","dev2","prod2","Intro","Jumbotron","padding","CodeArea","fontSize","fontFamily","border","width","height","Copier","text","copied","setCopied","onCopy","setTimeout","marginLeft","cursor","transition","color","title","size","Editor","encrypted","setEncrypted","yamlResult","setYamlResult","Container","Card","Body","pemKey","encryptValue","then","a","getSealedSecret","values","VALUE","sealedSecret","yaml","dump","catch","Title","defaultValue","App","className","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.3d74fa78.chunk.js","sourcesContent":["import React from \"react\";\n\nimport { Row, Col, Form as BsForm, Button } from \"react-bootstrap\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport { useQueryParams } from \"./useQueryParams\";\n\nconst RadioChoice = React.forwardRef(({ name, value, ...props }, ref) => (\n  <BsForm.Check\n    inline\n    ref={ref}\n    name={name}\n    id={`${name}-${value}`}\n    label={value}\n    type=\"radio\"\n    value={value}\n    {...props}\n  />\n));\n\nconst isValidQueryParamsKey = (key) => [\"namespace\", \"scope\", \"cluster\", \"name\"].includes(key);\n\nconst removeInvalidKeys = (keyValidator) => (object) =>\n    Object.keys(object)\n        .filter(keyValidator)\n        .reduce((acc, key) => ({\n            ...acc,\n            [key]: object[key]\n        }), {});\n\nconst keepValidQueryParamKeys = removeInvalidKeys(isValidQueryParamsKey);\n\nexport const Form = ({ onSubmit }) => {\n\n  const [queryParamsData, setQueryParamsData] = useQueryParams();\n\n  const defaultValues = {\n      cluster: \"dev2\",\n      value: \"\",\n      namespace: \"\",\n      name: \"\",\n      scope: \"cluster\",\n      ...keepValidQueryParamKeys(queryParamsData)\n  };\n\n  const {\n    register,\n    handleSubmit,\n    watch,\n    formState,\n    setValue,\n    trigger,\n  } = useForm({\n    mode: \"onChange\",\n    defaultValues,\n  });\n  const _onSubmit = (data) => {\n    setQueryParamsData(keepValidQueryParamKeys(data));\n    console.log(\"onSubmit\", data);\n    onSubmit(data);\n  };\n\n  const cluster = watch(\"cluster\");\n  const scope = watch(\"scope\");\n\n  return (\n    <BsForm onSubmit={handleSubmit(_onSubmit)}>\n      <Row>\n        <Col xs={12} md={6}>\n          <Row>\n            <Col sm=\"3\">\n              <BsForm.Label>Cluster</BsForm.Label>\n            </Col>\n            <Col sm=\"9\">\n              <RadioChoice\n                name=\"cluster\"\n                value=\"dev2\"\n                ref={register}\n                onChange={(e) => {\n                  setValue(\"cluster\", e.target.value);\n                  setValue(\"scope\", \"cluster\");\n                  trigger();\n                }}\n              />\n              <RadioChoice\n                name=\"cluster\"\n                value=\"prod2\"\n                ref={register}\n                onChange={(e) => {\n                  setValue(\"cluster\", e.target.value);\n                  setValue(\"scope\", \"strict\");\n                  trigger();\n                }}\n              />\n            </Col>\n          </Row>\n        </Col>\n        <Col>\n          <Row>\n            <Col xs={12} sm={3}>\n              <BsForm.Label>Scope</BsForm.Label>\n            </Col>\n            <Col sm={9}>\n              <RadioChoice\n                name=\"scope\"\n                value=\"cluster\"\n                disabled={cluster === \"prod2\"}\n                ref={register}\n                onChange={(e) => {\n                  setValue(\"scope\", e.target.value);\n                  trigger();\n                }}\n              />\n              <RadioChoice\n                name=\"scope\"\n                value=\"namespace\"\n                disabled={cluster === \"prod2\"}\n                ref={register}\n                onChange={(e) => {\n                  setValue(\"scope\", e.target.value);\n                  trigger();\n                }}\n              />\n              <RadioChoice\n                name=\"scope\"\n                value=\"strict\"\n                ref={register}\n                onChange={(e) => {\n                  setValue(\"scope\", e.target.value);\n                  trigger();\n                }}\n              />\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n      {(scope === \"namespace\" || scope === \"strict\") && (\n        <BsForm.Group as={Row}>\n          <BsForm.Label column>Namespace</BsForm.Label>\n          <Col sm=\"9\">\n            <BsForm.Control\n              name=\"namespace\"\n              ref={register({ required: true })}\n              required\n              type=\"text\"\n              placeholder=\"Namespace\"\n            />\n          </Col>\n        </BsForm.Group>\n      )}\n      {scope === \"strict\" && (\n        <BsForm.Group as={Row}>\n          <BsForm.Label column>Secret name</BsForm.Label>\n          <Col sm=\"9\">\n            <BsForm.Control\n              name=\"name\"\n              ref={register({ required: true })}\n              type=\"text\"\n              placeholder=\"Secret name\"\n            />\n          </Col>\n        </BsForm.Group>\n      )}\n      <BsForm.Group>\n        <BsForm.Control\n          as=\"textarea\"\n          name=\"value\"\n          style={{ marginTop: 10 }}\n          rows={4}\n          ref={register({ required: true })}\n          onChange={() => trigger()}\n          placeholder=\"Value to encrypt\"\n        />\n      </BsForm.Group>\n      <Button\n        disabled={!formState.isDirty || !formState.isValid}\n        block\n        variant=\"primary\"\n        type=\"submit\"\n      >\n        Encrypt\n      </Button>\n    </BsForm>\n  );\n};\n","import { parse, stringify } from \"query-string\";\nimport { useCallback, useState } from \"react\";\n\nexport const useQueryParams = () => {\n const urlParams = parse(window.location.search);\n\n const [innerData, setInnerData] = useState(urlParams);\n\n const setData = useCallback((data) => {\n     window.location.search = stringify(data);\n     setInnerData(data);\n },[setInnerData]);\n\n return [innerData, setData];\n}\n","\n// https://kubeseal.dev2.fabrique.social.gouv.fr/v1/cert.pem\nexport const dev2 = `-----BEGIN CERTIFICATE-----\nMIIErjCCApagAwIBAgIRAOqAV9ZpCl1cwMunTHirqXwwDQYJKoZIhvcNAQELBQAw\nADAeFw0yMDA1MjYwODQxMTBaFw0zMDA1MjQwODQxMTBaMAAwggIiMA0GCSqGSIb3\nDQEBAQUAA4ICDwAwggIKAoICAQDc5wz/el5+ghmNAsQzpFK3jtLRIDcoYgyeGHaG\nLH/FCuatiE3qhFeJt2uYQ+GFmEg3e9N/6xDY8NgUMvLdUlAfl5TqV5H96EXTSsGE\naRL2K4EIIdmFflas+r7dh5IYtmV8NTXW2ESLkyOe3PufK/OhdD/xcxglYLM+JnR2\npbKqFvFcsk+LHK3FTWt0xSeqgd+6G9PIxUAbHtoKYI9R41rWnCXY7n0zp+zWD/6j\nEDsbCgFJ657Zwwn0XXGkQqItdZsN+ETIcBVIdqemzcksd7RRUZQiJF8imM5S/wj/\n1o55JwAPLqg5Odj5T/pQq4gSG+UG1P0eJxBQpUCgmtW1SAjS2Gv9kkuw/PAMmLAa\nN0uHnM8TY9OPLLMENjmn9IhvYrhj5lKff4NXNC4nHFSDUAVfu5kNHrYn9WnCCw/f\nZE81p5Do7IcsbfmgEq3Ttg7p1eqXpH9NE9TWSZTz3HW/0lmEuIsNxjX/692DBeP/\nCCUiYlAef704Woo84jwIz4jEwfjonsFVaHbbtIGyqjvTlWcYfQnCLvnB+Plqutc/\n/p8/ViXXfuAwj/K3lYvhGWt2TNLo963XG/pqBVbZxYVI4m7IzrZ0vhbhck1oGYN8\nyX8sYPBUn5/5X/bJ8Xz1KsAeCfSXAvCjAZ3MfQDwxbsEURVQAeiDcF61G75/Lq/Z\nBm74hwIDAQABoyMwITAOBgNVHQ8BAf8EBAMCAAEwDwYDVR0TAQH/BAUwAwEB/zAN\nBgkqhkiG9w0BAQsFAAOCAgEAKLvQtDV5QVNUEcg3ywL03IwtNWmU8EqqASgckVAc\ndmeGnFwV7+7VnrIHI34xCZDhAVEnlMAb0oELgTDSstTx4p25rjqOLQfPcb0TsPko\ncpJHS00trLsLX4DYoZ1dLprgySGrC9jQ/FMYMK1oZ0M04gA/U9alNVNu2DWKosHu\nJGRYBbXVnse5rZi3hl4GV5Vq2ZR/3GHL9xgcjMcSLqHhXoSULLm5qEBUA5flV0BJ\nbY2FEfpm1NHSh5vOaA5t7lrW/XqiAuo8lJM2Ztg/dsX6Zxq7Memq8nqMRpoMFbdj\ni0jTxlPL1ssVHvvmWcLsdx9fHX7XaNGZ4ulA6BIL4DZQMPxvtFk9alqbc9WnjsqL\n/8QA3STXkTSzWrSsTUcabxlp5+MLHRf31iE1dlGVv7FVLjPy29T145eSzoNPM9sN\n1+aBLnXDCj5HUwto8+iKJn7VTURty5KceUFSeURXM2IKYYTec8MElLX0PeXi+SvO\nW37ZCn0RMnljus5aTUPbRHNvJ3Ut/1WDLQu8X0wIm509F1A80Udg5FTxHasBizM2\nL+rpr2923MG1JSitDfvNj1rxx1FLdynP84SOEJDCtbB8YRcDUC4bHKrAcG4FBAFX\nUDzbbsoR58onjcZW3QH4mvV9K3+llwHSo8zfYyKRhF8pUUJHp7A/8DgMYQyYAv2z\nbag=\n-----END CERTIFICATE-----`;\n\n// https://kubeseal.prod2.fabrique.social.gouv.fr/v1/cert.pem\nexport const prod2 = `-----BEGIN CERTIFICATE-----\nMIIErTCCApWgAwIBAgIQXJCfJIfF/fpww3KcvD0j1TANBgkqhkiG9w0BAQsFADAA\nMB4XDTIwMDUyNjA4NDkyN1oXDTMwMDUyNDA4NDkyN1owADCCAiIwDQYJKoZIhvcN\nAQEBBQADggIPADCCAgoCggIBAK8tTm78wfObpDaAa00eli9TwZfjbSO+Bis6DqNX\nto+tddnEBuEmnOlTKKoODZwnuph/G8JELKwbaTJ1bdYKasKDdgYju52ZMjBNexs4\nOX1L+YLiJEkwYBSkmYR/ARAulXIAolozjvub888OdWWOuZfX3DeNh/AI24uc+nrw\nsiKMyRZSsW9OXhRpBFe1BY8xofvnf1Ts5+OZWeNEmTbAKROKDd3rJpaKzxsJJwQ+\nSmRUQnxmwNxOfjFFxJx6n1jRloqwpLTOkCX/iSp6Nhnprcs8dvFjSH7l+gQU8XVY\nVXRWfXdJ6hBZd6fOjhKxlIrPz5+mUsMhyzON3ZS83XG9imFrWgSh3nBCifZRs4YF\nwxtGL1Qwm6CM+OsjLHM4lo6hrh9eEZVO8TwrXWKDU1CKkBgXVA5irGJ7NbGKtzih\nBZMRZ5pqQQ6ptiLXxfiB6DgvIJqvL8+yrt22j/QFZtyKkVW02n+dNiI7ltxb9RdS\nhyv3wBbHORgw6DbPrpoRpabDfUDEGJnd7+gY0Z5P9wHeX1vtt4g+XR5z/ERWIkFR\nuK2cLpflhGv4zE5DkI/2Pp4EAsQirUPlbdelvEz6NPtJk6ws5gQgBorRPaDhZojz\ntcYkFzRv3gkNHCMCMEAPEgU1OdUqslJVwi9P+/cxe9Piwwd9WWTu7mg6OB0cjhPI\ntYzhAgMBAAGjIzAhMA4GA1UdDwEB/wQEAwIAATAPBgNVHRMBAf8EBTADAQH/MA0G\nCSqGSIb3DQEBCwUAA4ICAQAjGgAz92xGNjbcIxsn2B/URYTBcsKd9RcgmzB3kDWq\nEKUV3KbgAItq4c2WB9bc0IG1Icp9bYOXZy1ldPoGib4edMUZuOU4xUAFVCrALGbk\ng8ldoEuIiSGAjQDuvWxl6XK8/FcBK93tR591zuJHS2KXspnV3FWi1tE8lr2zEd+G\nwuFzm0/uAyg+A+SEZVGwSBSH0fMWcCEk+yGyb4zmM3VW8D5zQvbialiqdmycZWoi\nC7Ldto5dBeFCCL7ndh1U0//UqaDmRCLazSeU6wCilWT4RvejBwNcojIYd0wk9keS\n8z92wpKj5Hv+OPn1r4fAmMnc3ObwtkVnka+QvuhKZOXmNInJSqdsZFToS6TaQOO6\n/W/urXYlcILJPlbTMlpjzxYVCi93yMcSrrdZ3MADlPhgtN+clVIRSQ/7eIDkh7j9\n9C+Dsz9nKa7FBSngDheJEEPcG2jNeRvO9kM2hgkMfcNdmTZUNyE19p1bdnTFoWCs\nq22fGvXZi6kkZTMDcSYDBZ8OkWK20GuZAs1mxrz9HfMdZobH7yNOj7Oj+0bNf5Ef\ntN6We84bWM+Xh7wlZxXPHpos5JDC5PV1Kmbwf3riLtTVe2W7hy+oKULS+WO59KJz\niKzeAM8CuUQixJtSmrNjp1nAsSR6/BZXWRvmZShksQ4kwFm/PlsWLEKgtzxtP0tN\nfg==\n-----END CERTIFICATE-----`;\n\nexport const certificates = {\n  dev2,\n  prod2,\n};\n","import React, { useState } from \"react\";\nimport { Card, Jumbotron, Container, Row, Col } from \"react-bootstrap\";\nimport { getSealedSecret, encryptValue } from \"@socialgouv/aes-gcm-rsa-oaep\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport { Clipboard } from \"react-feather\";\nimport yaml from \"js-yaml\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport { Form } from \"./Form\";\nimport { certificates } from \"./certificates.js\";\n\nconst Intro = () => (\n  <Jumbotron style={{ padding: \"2rem 1rem\" }}>\n    <h1>WebSeal</h1>\n    <p>Client-side sealed-secrets generation</p>\n  </Jumbotron>\n);\n\nconst CodeArea = (props) => (\n  <textarea\n    {...props}\n    style={{\n      fontSize: \"0.8rem\",\n      fontFamily: \"Courier\",\n      border: \"1px solid #ccc\",\n      width: \"100%\",\n      padding: 5,\n      height: 400,\n      ...(props.style || {}),\n    }}\n  ></textarea>\n);\n\nconst Copier = ({ text }) => {\n  const [copied, setCopied] = useState(false);\n  return (\n    <CopyToClipboard\n      text={text}\n      onCopy={() => {\n        setCopied(true);\n        setTimeout(() => setCopied(false), 2000);\n      }}\n    >\n      <Clipboard\n        style={{\n          marginLeft: 10,\n          cursor: \"pointer\",\n          transition: \"all 0.2s ease-in\",\n        }}\n        color={copied ? \"green\" : \"black\"}\n        title=\"Copy\"\n        size={16}\n      />\n    </CopyToClipboard>\n  );\n};\n\nconst Editor = () => {\n  const [encrypted, setEncrypted] = useState(null);\n  const [yamlResult, setYamlResult] = useState(null);\n  const onSubmit = (data) => {\n    console.log(\"onSubmit2\", data);\n    setYamlResult(\"\");\n    setEncrypted(\"\");\n    const pemKey = certificates[data.cluster];\n    encryptValue({\n      pemKey,\n      ...data,\n    })\n      .then(async (value) => {\n        setEncrypted(value);\n        const sealedSecret = await getSealedSecret({\n          pemKey,\n          namespace: data.namespace,\n          name: data.name,\n          scope: data.scope,\n          values: {\n            VALUE: data.value,\n          },\n        });\n\n        setYamlResult(yaml.dump(sealedSecret));\n      })\n      .catch(console.log);\n  };\n  return (\n    <Container>\n      <Intro />\n      <Row>\n        <Col xs={12}>\n          <Card>\n            <Card.Body>\n              <Form onSubmit={onSubmit} />\n            </Card.Body>\n          </Card>\n          {encrypted && (\n            <>\n              <Card style={{ marginTop: 10 }}>\n                <Card.Body>\n                  <Card.Title>\n                    Encrypted <Copier text={encrypted} />\n                  </Card.Title>\n                  <CodeArea defaultValue={encrypted} style={{ height: 200 }} />\n                </Card.Body>\n              </Card>\n              <Card style={{ marginTop: 10 }}>\n                <Card.Body>\n                  <Card.Title>\n                    SealedSecret <Copier text={yamlResult} />\n                  </Card.Title>\n                  <CodeArea defaultValue={yamlResult} />\n                </Card.Body>\n              </Card>\n            </>\n          )}\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default function App() {\n  return (\n    <div className=\"App\">\n      <Editor />\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}