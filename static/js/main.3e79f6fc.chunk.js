(this["webpackJsonp@socialgouv/webseal"]=this["webpackJsonp@socialgouv/webseal"]||[]).push([[0],{161:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return o}));var c=t(14),a=t.n(c),s=t(21),r=t(88),l=t(89);const i=({scope:e,namespace:n,name:t})=>"cluster"===e?"":"namespace"===e?n:"".concat(n,"/").concat(t),o=function(){var n=Object(s.a)(a.a.mark((function n({pemKey:t,scope:c,namespace:s,name:o,value:j}){var b,d,u,p,m;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return b=r.pki.certificateFromPem(t),d=r.pki.publicKeyToPem(b.publicKey),n.next=4,Object(l.pemPublicKeyToCryptoKey)(d);case 4:return u=n.sent,p=e.from(i({scope:c,namespace:s,name:o})),n.next=8,Object(l.HybridEncrypt)(u,j,p);case 8:return m=n.sent,n.abrupt("return",e.from(m).toString("base64"));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}).call(this,t(12).Buffer)},191:function(e,n){},193:function(e,n){},203:function(e,n){},205:function(e,n){},230:function(e,n){},231:function(e,n){},236:function(e,n){},238:function(e,n){},245:function(e,n){},264:function(e,n){},280:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),s=t(159),r=t.n(s),l=t(55),i=t(27),o=t(283),j=t(284),b=t(282),d=t(160),u=t(286),p=(t(170),t(163)),m=t(285),A=t(287),O=t(164),h=t(3);const x=a.a.forwardRef(((e,n)=>{let t=e.name,c=e.value,a=Object(p.a)(e,["name","value"]);return Object(h.jsx)(m.a.Check,Object(l.a)({inline:!0,ref:n,name:t,id:"".concat(t,"-").concat(c),label:c,type:"radio",value:c},a))})),g=({onSubmit:e})=>{const n=Object(O.a)({mode:"onChange",defaultValues:{cluster:"dev2",value:"",namespace:"",name:"",scope:"cluster"}}),t=n.register,c=n.handleSubmit,a=n.getValues,s=n.formState,r=n.setValue,l=n.trigger,i=a("cluster"),o=a("scope");return Object(h.jsxs)(m.a,{onSubmit:c((n=>{console.log("onSubmit",n),e(n)})),children:[Object(h.jsxs)(b.a,{children:[Object(h.jsx)(d.a,{xs:12,md:6,children:Object(h.jsxs)(b.a,{children:[Object(h.jsx)(d.a,{sm:"3",children:Object(h.jsx)(m.a.Label,{children:"Cluster"})}),Object(h.jsxs)(d.a,{sm:"9",children:[Object(h.jsx)(x,{name:"cluster",value:"dev2",ref:t,onChange:e=>{r("cluster",e.target.value),r("scope","cluster"),l()}}),Object(h.jsx)(x,{name:"cluster",value:"prod2",ref:t,onChange:e=>{r("cluster",e.target.value),r("scope","strict"),l()}})]})]})}),Object(h.jsx)(d.a,{children:Object(h.jsxs)(b.a,{children:[Object(h.jsx)(d.a,{xs:12,sm:3,children:Object(h.jsx)(m.a.Label,{children:"Scope"})}),Object(h.jsxs)(d.a,{sm:9,children:[Object(h.jsx)(x,{name:"scope",value:"cluster",disabled:"prod2"===i,ref:t,onChange:e=>{r("scope",e.target.value),l()}}),Object(h.jsx)(x,{name:"scope",value:"namespace",disabled:"prod2"===i,ref:t,onChange:e=>{r("scope",e.target.value),l()}}),Object(h.jsx)(x,{name:"scope",value:"strict",ref:t,onChange:e=>{r("scope",e.target.value),l()}})]})]})})]}),("namespace"===o||"strict"===o)&&Object(h.jsxs)(m.a.Group,{as:b.a,children:[Object(h.jsx)(m.a.Label,{column:!0,children:"Namespace"}),Object(h.jsx)(d.a,{sm:"9",children:Object(h.jsx)(m.a.Control,{name:"namespace",ref:t({required:!0}),required:!0,type:"text",placeholder:"Namespace"})})]}),"strict"===o&&Object(h.jsxs)(m.a.Group,{as:b.a,children:[Object(h.jsx)(m.a.Label,{column:!0,children:"Secret name"}),Object(h.jsx)(d.a,{sm:"9",children:Object(h.jsx)(m.a.Control,{name:"name",ref:t({required:!0}),type:"text",placeholder:"Secret name"})})]}),Object(h.jsx)(m.a.Group,{children:Object(h.jsx)(m.a.Control,{as:"textarea",name:"value",style:{marginTop:10},rows:4,ref:t({required:!0}),placeholder:"Value to encrypt"})}),Object(h.jsx)(A.a,{disabled:!s.isDirty||!s.isValid,block:!0,variant:"primary",type:"submit",children:"Encrypt"})]})},f={dev2:"-----BEGIN CERTIFICATE-----\nMIIErjCCApagAwIBAgIRAOqAV9ZpCl1cwMunTHirqXwwDQYJKoZIhvcNAQELBQAw\nADAeFw0yMDA1MjYwODQxMTBaFw0zMDA1MjQwODQxMTBaMAAwggIiMA0GCSqGSIb3\nDQEBAQUAA4ICDwAwggIKAoICAQDc5wz/el5+ghmNAsQzpFK3jtLRIDcoYgyeGHaG\nLH/FCuatiE3qhFeJt2uYQ+GFmEg3e9N/6xDY8NgUMvLdUlAfl5TqV5H96EXTSsGE\naRL2K4EIIdmFflas+r7dh5IYtmV8NTXW2ESLkyOe3PufK/OhdD/xcxglYLM+JnR2\npbKqFvFcsk+LHK3FTWt0xSeqgd+6G9PIxUAbHtoKYI9R41rWnCXY7n0zp+zWD/6j\nEDsbCgFJ657Zwwn0XXGkQqItdZsN+ETIcBVIdqemzcksd7RRUZQiJF8imM5S/wj/\n1o55JwAPLqg5Odj5T/pQq4gSG+UG1P0eJxBQpUCgmtW1SAjS2Gv9kkuw/PAMmLAa\nN0uHnM8TY9OPLLMENjmn9IhvYrhj5lKff4NXNC4nHFSDUAVfu5kNHrYn9WnCCw/f\nZE81p5Do7IcsbfmgEq3Ttg7p1eqXpH9NE9TWSZTz3HW/0lmEuIsNxjX/692DBeP/\nCCUiYlAef704Woo84jwIz4jEwfjonsFVaHbbtIGyqjvTlWcYfQnCLvnB+Plqutc/\n/p8/ViXXfuAwj/K3lYvhGWt2TNLo963XG/pqBVbZxYVI4m7IzrZ0vhbhck1oGYN8\nyX8sYPBUn5/5X/bJ8Xz1KsAeCfSXAvCjAZ3MfQDwxbsEURVQAeiDcF61G75/Lq/Z\nBm74hwIDAQABoyMwITAOBgNVHQ8BAf8EBAMCAAEwDwYDVR0TAQH/BAUwAwEB/zAN\nBgkqhkiG9w0BAQsFAAOCAgEAKLvQtDV5QVNUEcg3ywL03IwtNWmU8EqqASgckVAc\ndmeGnFwV7+7VnrIHI34xCZDhAVEnlMAb0oELgTDSstTx4p25rjqOLQfPcb0TsPko\ncpJHS00trLsLX4DYoZ1dLprgySGrC9jQ/FMYMK1oZ0M04gA/U9alNVNu2DWKosHu\nJGRYBbXVnse5rZi3hl4GV5Vq2ZR/3GHL9xgcjMcSLqHhXoSULLm5qEBUA5flV0BJ\nbY2FEfpm1NHSh5vOaA5t7lrW/XqiAuo8lJM2Ztg/dsX6Zxq7Memq8nqMRpoMFbdj\ni0jTxlPL1ssVHvvmWcLsdx9fHX7XaNGZ4ulA6BIL4DZQMPxvtFk9alqbc9WnjsqL\n/8QA3STXkTSzWrSsTUcabxlp5+MLHRf31iE1dlGVv7FVLjPy29T145eSzoNPM9sN\n1+aBLnXDCj5HUwto8+iKJn7VTURty5KceUFSeURXM2IKYYTec8MElLX0PeXi+SvO\nW37ZCn0RMnljus5aTUPbRHNvJ3Ut/1WDLQu8X0wIm509F1A80Udg5FTxHasBizM2\nL+rpr2923MG1JSitDfvNj1rxx1FLdynP84SOEJDCtbB8YRcDUC4bHKrAcG4FBAFX\nUDzbbsoR58onjcZW3QH4mvV9K3+llwHSo8zfYyKRhF8pUUJHp7A/8DgMYQyYAv2z\nbag=\n-----END CERTIFICATE-----",prod2:"-----BEGIN CERTIFICATE-----\nMIIErTCCApWgAwIBAgIQXJCfJIfF/fpww3KcvD0j1TANBgkqhkiG9w0BAQsFADAA\nMB4XDTIwMDUyNjA4NDkyN1oXDTMwMDUyNDA4NDkyN1owADCCAiIwDQYJKoZIhvcN\nAQEBBQADggIPADCCAgoCggIBAK8tTm78wfObpDaAa00eli9TwZfjbSO+Bis6DqNX\nto+tddnEBuEmnOlTKKoODZwnuph/G8JELKwbaTJ1bdYKasKDdgYju52ZMjBNexs4\nOX1L+YLiJEkwYBSkmYR/ARAulXIAolozjvub888OdWWOuZfX3DeNh/AI24uc+nrw\nsiKMyRZSsW9OXhRpBFe1BY8xofvnf1Ts5+OZWeNEmTbAKROKDd3rJpaKzxsJJwQ+\nSmRUQnxmwNxOfjFFxJx6n1jRloqwpLTOkCX/iSp6Nhnprcs8dvFjSH7l+gQU8XVY\nVXRWfXdJ6hBZd6fOjhKxlIrPz5+mUsMhyzON3ZS83XG9imFrWgSh3nBCifZRs4YF\nwxtGL1Qwm6CM+OsjLHM4lo6hrh9eEZVO8TwrXWKDU1CKkBgXVA5irGJ7NbGKtzih\nBZMRZ5pqQQ6ptiLXxfiB6DgvIJqvL8+yrt22j/QFZtyKkVW02n+dNiI7ltxb9RdS\nhyv3wBbHORgw6DbPrpoRpabDfUDEGJnd7+gY0Z5P9wHeX1vtt4g+XR5z/ERWIkFR\nuK2cLpflhGv4zE5DkI/2Pp4EAsQirUPlbdelvEz6NPtJk6ws5gQgBorRPaDhZojz\ntcYkFzRv3gkNHCMCMEAPEgU1OdUqslJVwi9P+/cxe9Piwwd9WWTu7mg6OB0cjhPI\ntYzhAgMBAAGjIzAhMA4GA1UdDwEB/wQEAwIAATAPBgNVHRMBAf8EBTADAQH/MA0G\nCSqGSIb3DQEBCwUAA4ICAQAjGgAz92xGNjbcIxsn2B/URYTBcsKd9RcgmzB3kDWq\nEKUV3KbgAItq4c2WB9bc0IG1Icp9bYOXZy1ldPoGib4edMUZuOU4xUAFVCrALGbk\ng8ldoEuIiSGAjQDuvWxl6XK8/FcBK93tR591zuJHS2KXspnV3FWi1tE8lr2zEd+G\nwuFzm0/uAyg+A+SEZVGwSBSH0fMWcCEk+yGyb4zmM3VW8D5zQvbialiqdmycZWoi\nC7Ldto5dBeFCCL7ndh1U0//UqaDmRCLazSeU6wCilWT4RvejBwNcojIYd0wk9keS\n8z92wpKj5Hv+OPn1r4fAmMnc3ObwtkVnka+QvuhKZOXmNInJSqdsZFToS6TaQOO6\n/W/urXYlcILJPlbTMlpjzxYVCi93yMcSrrdZ3MADlPhgtN+clVIRSQ/7eIDkh7j9\n9C+Dsz9nKa7FBSngDheJEEPcG2jNeRvO9kM2hgkMfcNdmTZUNyE19p1bdnTFoWCs\nq22fGvXZi6kkZTMDcSYDBZ8OkWK20GuZAs1mxrz9HfMdZobH7yNOj7Oj+0bNf5Ef\ntN6We84bWM+Xh7wlZxXPHpos5JDC5PV1Kmbwf3riLtTVe2W7hy+oKULS+WO59KJz\niKzeAM8CuUQixJtSmrNjp1nAsSR6/BZXWRvmZShksQ4kwFm/PlsWLEKgtzxtP0tN\nfg==\n-----END CERTIFICATE-----"};var w=t(161),D=t(162),E=t.n(D);const C=()=>Object(h.jsxs)(o.a,{style:{padding:"2rem 1rem"},children:[Object(h.jsx)("h1",{children:"WebSeal"}),Object(h.jsx)("p",{children:"Client-side sealed-secrets generation"})]}),I=()=>{const e=Object(c.useState)(null),n=Object(i.a)(e,2),t=n[0],a=n[1],s=Object(c.useState)(null),r=Object(i.a)(s,2),o=r[0],p=r[1];return Object(h.jsxs)(j.a,{children:[Object(h.jsx)(C,{}),Object(h.jsx)(b.a,{children:Object(h.jsxs)(d.a,{xs:12,children:[Object(h.jsx)(u.a,{children:Object(h.jsx)(u.a.Body,{children:Object(h.jsx)(g,{onSubmit:e=>{console.log("onSubmit2",e);const n=f[e.cluster];Object(w.a)(Object(l.a)({pemKey:n},e)).then((n=>{a(n);const t=(({namespace:e="some-namespace",name:n="some-secret-name",scope:t="strict",encryptedData:c})=>{const a={};"cluster"===t&&(a["sealedsecrets.bitnami.com/cluster-wide"]="true");const s={apiVersion:"bitnami.com/v1alpha1",kind:"SealedSecret",metadata:{annotations:a,name:n,namespace:e},spec:{encryptedData:c},template:{metadata:{annotations:a,name:n},type:"Opaque"}};return E.a.stringify(s)})({namespace:e.namespace,name:e.name,scope:e.scope,encryptedData:{VALUE:n}});p(t)})).catch(console.log)}})})}),t&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(u.a,{style:{marginTop:10},children:Object(h.jsxs)(u.a.Body,{children:[Object(h.jsx)(u.a.Title,{children:"Encrypted"}),Object(h.jsx)("div",{children:t})]})}),Object(h.jsx)(u.a,{style:{marginTop:10},children:Object(h.jsxs)(u.a.Body,{children:[Object(h.jsx)(u.a.Title,{children:"SealedSecret"}),Object(h.jsx)("textarea",{style:{whiteSpace:"pre",fontSize:"0.8rem",fontFamily:"Courier",width:"100%",padding:5,height:400},defaultValue:o})]})})]})]})})]})};function S(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(I,{})})}const B=document.getElementById("root");r.a.render(Object(h.jsx)(c.StrictMode,{children:Object(h.jsx)(S,{})}),B)},63:function(e,n){}},[[280,1,2]]]);
//# sourceMappingURL=main.3e79f6fc.chunk.js.map