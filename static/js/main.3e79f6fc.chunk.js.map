{"version":3,"sources":["makeSecret.js","Form.js","certificates.js","makeYaml.js","App.js","index.js"],"names":["getLabel","scope","namespace","name","makeSecret","pemKey","value","a","cert","pki","certificateFromPem","publicKeyPem","publicKeyToPem","publicKey","pemPublicKeyToCryptoKey","label","Buffer","from","HybridEncrypt","result","toString","RadioChoice","React","forwardRef","ref","props","Check","inline","id","type","Form","onSubmit","useForm","mode","defaultValues","cluster","register","handleSubmit","getValues","formState","setValue","trigger","data","console","log","Row","Col","xs","md","sm","Label","onChange","e","target","disabled","Group","as","column","Control","required","placeholder","style","marginTop","rows","Button","isDirty","isValid","block","variant","certificates","dev2","prod2","Intro","Jumbotron","padding","Editor","useState","encrypted","setEncrypted","yaml","setYaml","Container","Card","Body","then","newYaml","encryptedData","annotations","manifest","apiVersion","kind","metadata","spec","template","YAML","stringify","makeYaml","VALUE","catch","Title","whiteSpace","fontSize","fontFamily","width","height","defaultValue","App","className","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.3e79f6fc.chunk.js","sourcesContent":["import { pki } from \"node-forge\";\nimport {\n  HybridEncrypt,\n  pemPublicKeyToCryptoKey,\n} from \"@socialgouv/aes-gcm-rsa-oaep\";\n\n// https://github.com/bitnami-labs/sealed-secrets/blob/717b7c1cae24af1ead57992b78196ff6dc70025e/pkg/apis/sealed-secrets/v1alpha1/sealedsecret_expansion.go#L77\nconst getLabel = ({ scope, namespace, name }) => {\n  if (scope === \"cluster\") {\n    return \"\";\n  } else if (scope === \"namespace\") {\n    return namespace;\n  }\n  return `${namespace}/${name}`;\n};\n\nexport const makeSecret = async ({ pemKey, scope, namespace, name, value }) => {\n  const cert = pki.certificateFromPem(pemKey);\n  const publicKeyPem = pki.publicKeyToPem(cert.publicKey);\n  const publicKey = await pemPublicKeyToCryptoKey(publicKeyPem);\n  const label = Buffer.from(getLabel({ scope, namespace, name }));\n  const result = await HybridEncrypt(publicKey, value, label);\n  return Buffer.from(result).toString(\"base64\");\n};\n","import React from \"react\";\n\nimport { Row, Col, Form as BsForm, Button } from \"react-bootstrap\";\nimport { useForm, Controller } from \"react-hook-form\";\n\nconst RadioChoice = React.forwardRef(({ name, value, ...props }, ref) => (\n  <BsForm.Check\n    inline\n    ref={ref}\n    name={name}\n    id={`${name}-${value}`}\n    label={value}\n    type=\"radio\"\n    value={value}\n    {...props}\n  />\n));\n\nexport const Form = ({ onSubmit }) => {\n  const {\n    register,\n    handleSubmit,\n    getValues,\n    formState,\n    setValue,\n    trigger,\n  } = useForm({\n    mode: \"onChange\",\n    defaultValues: {\n      cluster: \"dev2\",\n      value: \"\",\n      namespace: \"\",\n      name: \"\",\n      scope: \"cluster\",\n    },\n  });\n  const _onSubmit = (data) => {\n    console.log(\"onSubmit\", data);\n    onSubmit(data);\n  };\n  const cluster = getValues(\"cluster\");\n  const scope = getValues(\"scope\");\n  return (\n    <BsForm onSubmit={handleSubmit(_onSubmit)}>\n      <Row>\n        <Col xs={12} md={6}>\n          <Row>\n            <Col sm=\"3\">\n              <BsForm.Label>Cluster</BsForm.Label>\n            </Col>\n            <Col sm=\"9\">\n              <RadioChoice\n                name=\"cluster\"\n                value=\"dev2\"\n                ref={register}\n                onChange={(e) => {\n                  setValue(\"cluster\", e.target.value);\n                  setValue(\"scope\", \"cluster\");\n                  trigger();\n                }}\n              />\n              <RadioChoice\n                name=\"cluster\"\n                value=\"prod2\"\n                ref={register}\n                onChange={(e) => {\n                  setValue(\"cluster\", e.target.value);\n                  setValue(\"scope\", \"strict\");\n                  trigger();\n                }}\n              />\n            </Col>\n          </Row>\n        </Col>\n        <Col>\n          <Row>\n            <Col xs={12} sm={3}>\n              <BsForm.Label>Scope</BsForm.Label>\n            </Col>\n            <Col sm={9}>\n              <RadioChoice\n                name=\"scope\"\n                value=\"cluster\"\n                disabled={cluster === \"prod2\"}\n                ref={register}\n                onChange={(e) => {\n                  setValue(\"scope\", e.target.value);\n                  trigger();\n                }}\n              />\n              <RadioChoice\n                name=\"scope\"\n                value=\"namespace\"\n                disabled={cluster === \"prod2\"}\n                ref={register}\n                onChange={(e) => {\n                  setValue(\"scope\", e.target.value);\n                  trigger();\n                }}\n              />\n              <RadioChoice\n                name=\"scope\"\n                value=\"strict\"\n                ref={register}\n                onChange={(e) => {\n                  setValue(\"scope\", e.target.value);\n                  trigger();\n                }}\n              />\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n      {(scope === \"namespace\" || scope === \"strict\") && (\n        <BsForm.Group as={Row}>\n          <BsForm.Label column>Namespace</BsForm.Label>\n          <Col sm=\"9\">\n            <BsForm.Control\n              name=\"namespace\"\n              ref={register({ required: true })}\n              required\n              type=\"text\"\n              placeholder=\"Namespace\"\n            />\n          </Col>\n        </BsForm.Group>\n      )}\n      {scope === \"strict\" && (\n        <BsForm.Group as={Row}>\n          <BsForm.Label column>Secret name</BsForm.Label>\n          <Col sm=\"9\">\n            <BsForm.Control\n              name=\"name\"\n              ref={register({ required: true })}\n              type=\"text\"\n              placeholder=\"Secret name\"\n            />\n          </Col>\n        </BsForm.Group>\n      )}\n      <BsForm.Group>\n        <BsForm.Control\n          as=\"textarea\"\n          name=\"value\"\n          style={{ marginTop: 10 }}\n          rows={4}\n          ref={register({ required: true })}\n          placeholder=\"Value to encrypt\"\n        />\n      </BsForm.Group>\n      <Button\n        disabled={!formState.isDirty || !formState.isValid}\n        block\n        variant=\"primary\"\n        type=\"submit\"\n      >\n        Encrypt\n      </Button>\n    </BsForm>\n  );\n};\n","\n// https://kubeseal.dev2.fabrique.social.gouv.fr/v1/cert.pem\nexport const dev2 = `-----BEGIN CERTIFICATE-----\nMIIErjCCApagAwIBAgIRAOqAV9ZpCl1cwMunTHirqXwwDQYJKoZIhvcNAQELBQAw\nADAeFw0yMDA1MjYwODQxMTBaFw0zMDA1MjQwODQxMTBaMAAwggIiMA0GCSqGSIb3\nDQEBAQUAA4ICDwAwggIKAoICAQDc5wz/el5+ghmNAsQzpFK3jtLRIDcoYgyeGHaG\nLH/FCuatiE3qhFeJt2uYQ+GFmEg3e9N/6xDY8NgUMvLdUlAfl5TqV5H96EXTSsGE\naRL2K4EIIdmFflas+r7dh5IYtmV8NTXW2ESLkyOe3PufK/OhdD/xcxglYLM+JnR2\npbKqFvFcsk+LHK3FTWt0xSeqgd+6G9PIxUAbHtoKYI9R41rWnCXY7n0zp+zWD/6j\nEDsbCgFJ657Zwwn0XXGkQqItdZsN+ETIcBVIdqemzcksd7RRUZQiJF8imM5S/wj/\n1o55JwAPLqg5Odj5T/pQq4gSG+UG1P0eJxBQpUCgmtW1SAjS2Gv9kkuw/PAMmLAa\nN0uHnM8TY9OPLLMENjmn9IhvYrhj5lKff4NXNC4nHFSDUAVfu5kNHrYn9WnCCw/f\nZE81p5Do7IcsbfmgEq3Ttg7p1eqXpH9NE9TWSZTz3HW/0lmEuIsNxjX/692DBeP/\nCCUiYlAef704Woo84jwIz4jEwfjonsFVaHbbtIGyqjvTlWcYfQnCLvnB+Plqutc/\n/p8/ViXXfuAwj/K3lYvhGWt2TNLo963XG/pqBVbZxYVI4m7IzrZ0vhbhck1oGYN8\nyX8sYPBUn5/5X/bJ8Xz1KsAeCfSXAvCjAZ3MfQDwxbsEURVQAeiDcF61G75/Lq/Z\nBm74hwIDAQABoyMwITAOBgNVHQ8BAf8EBAMCAAEwDwYDVR0TAQH/BAUwAwEB/zAN\nBgkqhkiG9w0BAQsFAAOCAgEAKLvQtDV5QVNUEcg3ywL03IwtNWmU8EqqASgckVAc\ndmeGnFwV7+7VnrIHI34xCZDhAVEnlMAb0oELgTDSstTx4p25rjqOLQfPcb0TsPko\ncpJHS00trLsLX4DYoZ1dLprgySGrC9jQ/FMYMK1oZ0M04gA/U9alNVNu2DWKosHu\nJGRYBbXVnse5rZi3hl4GV5Vq2ZR/3GHL9xgcjMcSLqHhXoSULLm5qEBUA5flV0BJ\nbY2FEfpm1NHSh5vOaA5t7lrW/XqiAuo8lJM2Ztg/dsX6Zxq7Memq8nqMRpoMFbdj\ni0jTxlPL1ssVHvvmWcLsdx9fHX7XaNGZ4ulA6BIL4DZQMPxvtFk9alqbc9WnjsqL\n/8QA3STXkTSzWrSsTUcabxlp5+MLHRf31iE1dlGVv7FVLjPy29T145eSzoNPM9sN\n1+aBLnXDCj5HUwto8+iKJn7VTURty5KceUFSeURXM2IKYYTec8MElLX0PeXi+SvO\nW37ZCn0RMnljus5aTUPbRHNvJ3Ut/1WDLQu8X0wIm509F1A80Udg5FTxHasBizM2\nL+rpr2923MG1JSitDfvNj1rxx1FLdynP84SOEJDCtbB8YRcDUC4bHKrAcG4FBAFX\nUDzbbsoR58onjcZW3QH4mvV9K3+llwHSo8zfYyKRhF8pUUJHp7A/8DgMYQyYAv2z\nbag=\n-----END CERTIFICATE-----`;\n\n// https://kubeseal.prod2.fabrique.social.gouv.fr/v1/cert.pem\nexport const prod2 = `-----BEGIN CERTIFICATE-----\nMIIErTCCApWgAwIBAgIQXJCfJIfF/fpww3KcvD0j1TANBgkqhkiG9w0BAQsFADAA\nMB4XDTIwMDUyNjA4NDkyN1oXDTMwMDUyNDA4NDkyN1owADCCAiIwDQYJKoZIhvcN\nAQEBBQADggIPADCCAgoCggIBAK8tTm78wfObpDaAa00eli9TwZfjbSO+Bis6DqNX\nto+tddnEBuEmnOlTKKoODZwnuph/G8JELKwbaTJ1bdYKasKDdgYju52ZMjBNexs4\nOX1L+YLiJEkwYBSkmYR/ARAulXIAolozjvub888OdWWOuZfX3DeNh/AI24uc+nrw\nsiKMyRZSsW9OXhRpBFe1BY8xofvnf1Ts5+OZWeNEmTbAKROKDd3rJpaKzxsJJwQ+\nSmRUQnxmwNxOfjFFxJx6n1jRloqwpLTOkCX/iSp6Nhnprcs8dvFjSH7l+gQU8XVY\nVXRWfXdJ6hBZd6fOjhKxlIrPz5+mUsMhyzON3ZS83XG9imFrWgSh3nBCifZRs4YF\nwxtGL1Qwm6CM+OsjLHM4lo6hrh9eEZVO8TwrXWKDU1CKkBgXVA5irGJ7NbGKtzih\nBZMRZ5pqQQ6ptiLXxfiB6DgvIJqvL8+yrt22j/QFZtyKkVW02n+dNiI7ltxb9RdS\nhyv3wBbHORgw6DbPrpoRpabDfUDEGJnd7+gY0Z5P9wHeX1vtt4g+XR5z/ERWIkFR\nuK2cLpflhGv4zE5DkI/2Pp4EAsQirUPlbdelvEz6NPtJk6ws5gQgBorRPaDhZojz\ntcYkFzRv3gkNHCMCMEAPEgU1OdUqslJVwi9P+/cxe9Piwwd9WWTu7mg6OB0cjhPI\ntYzhAgMBAAGjIzAhMA4GA1UdDwEB/wQEAwIAATAPBgNVHRMBAf8EBTADAQH/MA0G\nCSqGSIb3DQEBCwUAA4ICAQAjGgAz92xGNjbcIxsn2B/URYTBcsKd9RcgmzB3kDWq\nEKUV3KbgAItq4c2WB9bc0IG1Icp9bYOXZy1ldPoGib4edMUZuOU4xUAFVCrALGbk\ng8ldoEuIiSGAjQDuvWxl6XK8/FcBK93tR591zuJHS2KXspnV3FWi1tE8lr2zEd+G\nwuFzm0/uAyg+A+SEZVGwSBSH0fMWcCEk+yGyb4zmM3VW8D5zQvbialiqdmycZWoi\nC7Ldto5dBeFCCL7ndh1U0//UqaDmRCLazSeU6wCilWT4RvejBwNcojIYd0wk9keS\n8z92wpKj5Hv+OPn1r4fAmMnc3ObwtkVnka+QvuhKZOXmNInJSqdsZFToS6TaQOO6\n/W/urXYlcILJPlbTMlpjzxYVCi93yMcSrrdZ3MADlPhgtN+clVIRSQ/7eIDkh7j9\n9C+Dsz9nKa7FBSngDheJEEPcG2jNeRvO9kM2hgkMfcNdmTZUNyE19p1bdnTFoWCs\nq22fGvXZi6kkZTMDcSYDBZ8OkWK20GuZAs1mxrz9HfMdZobH7yNOj7Oj+0bNf5Ef\ntN6We84bWM+Xh7wlZxXPHpos5JDC5PV1Kmbwf3riLtTVe2W7hy+oKULS+WO59KJz\niKzeAM8CuUQixJtSmrNjp1nAsSR6/BZXWRvmZShksQ4kwFm/PlsWLEKgtzxtP0tN\nfg==\n-----END CERTIFICATE-----`;\n\nexport const certificates = {\n  dev2,\n  prod2,\n};\n","import YAML from \"yaml\";\n\nexport const makeYaml = ({\n  namespace = \"some-namespace\",\n  name = \"some-secret-name\",\n  scope = \"strict\",\n  encryptedData,\n}) => {\n  const annotations = {};\n  if (scope === \"cluster\") {\n    annotations[\"sealedsecrets.bitnami.com/cluster-wide\"] = \"true\";\n  }\n\n  const manifest = {\n    apiVersion: \"bitnami.com/v1alpha1\",\n    kind: \"SealedSecret\",\n    metadata: {\n      annotations,\n      name,\n      namespace,\n    },\n    spec: {\n      encryptedData,\n    },\n    template: {\n      metadata: {\n        annotations,\n        name,\n      },\n      type: \"Opaque\",\n    },\n  };\n\n  return YAML.stringify(manifest);\n};\n","import React, { useState } from \"react\";\nimport { Card, Jumbotron, Container, Row, Col } from \"react-bootstrap\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport { Form } from \"./Form\";\nimport { certificates } from \"./certificates.js\";\nimport { makeSecret } from \"./makeSecret\";\nimport { makeYaml } from \"./makeYaml\";\n\nconst Intro = () => (\n  <Jumbotron style={{ padding: \"2rem 1rem\" }}>\n    <h1>WebSeal</h1>\n    <p>Client-side sealed-secrets generation</p>\n  </Jumbotron>\n);\n\nconst Editor = () => {\n  const [encrypted, setEncrypted] = useState(null);\n  const [yaml, setYaml] = useState(null);\n  const onSubmit = (data) => {\n    console.log(\"onSubmit2\", data);\n    const pemKey = certificates[data.cluster];\n    makeSecret({\n      pemKey,\n      ...data,\n    })\n      .then((value) => {\n        setEncrypted(value);\n        const newYaml = makeYaml({\n          namespace: data.namespace,\n          name: data.name,\n          scope: data.scope,\n          encryptedData: {\n            VALUE: value,\n          },\n        });\n\n        setYaml(newYaml);\n      })\n      .catch(console.log);\n  };\n  return (\n    <Container>\n      <Intro />\n      <Row>\n        <Col xs={12}>\n          <Card>\n            <Card.Body>\n              <Form onSubmit={onSubmit} />\n            </Card.Body>\n          </Card>\n          {encrypted && (\n            <>\n              <Card style={{ marginTop: 10 }}>\n                <Card.Body>\n                  <Card.Title>Encrypted</Card.Title>\n                  <div>{encrypted}</div>\n                </Card.Body>\n              </Card>\n              <Card style={{ marginTop: 10 }}>\n                <Card.Body>\n                  <Card.Title>SealedSecret</Card.Title>\n                  <textarea\n                    style={{\n                      whiteSpace: \"pre\",\n                      fontSize: \"0.8rem\",\n                      fontFamily: \"Courier\",\n                      width: \"100%\",\n                      padding: 5,\n                      height: 400,\n                    }}\n                    defaultValue={yaml}\n                  ></textarea>\n                </Card.Body>\n              </Card>\n            </>\n          )}\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default function App() {\n  return (\n    <div className=\"App\">\n      <Editor />\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}